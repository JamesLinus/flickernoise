#!/bin/sh
. ./Common

###############################################################################

ptest "and: band(a, b)" << EOF
sx = band(a, b)
EOF
expect <<EOF
sx = (&& a b)
EOF

#------------------------------------------------------------------------------

ptest "and: a && b" << EOF
sx = a && b
EOF
expect <<EOF
sx = (&& a b)
EOF

#------------------------------------------------------------------------------

ptest "and: 0 && 0" << EOF
sx = 0 && 0
EOF
expect <<EOF
sx = 0
EOF

#------------------------------------------------------------------------------

ptest "and: 1 && 0" << EOF
sx = 1 && 0
EOF
expect <<EOF
sx = 0
EOF

#------------------------------------------------------------------------------

ptest "and: 0 && 1" << EOF
sx = 0 && 1
EOF
expect <<EOF
sx = 0
EOF

#------------------------------------------------------------------------------

ptest "and: 1 && 1" << EOF
sx = 1 && 1
EOF
expect <<EOF
sx = 1
EOF

#------------------------------------------------------------------------------

ptest "and: a && b == c" << EOF
sx = a && b == c
EOF
expect <<EOF
sx = (&& a (equal b c))
EOF

#------------------------------------------------------------------------------

fpvm "and: a && b (generate code)" <<EOF
sx = a && b
EOF
expect <<EOF
COPY a -> R2
IF 1,0 -> R-003
COPY b -> R2
IF R-003,0 -> sx
EOF

###############################################################################
