#!/bin/sh
. ./Common

###############################################################################

ptest_fail "stimuli, errors: \"time\" as control variable" -c -q << EOF
midi "foo" {
	bar = pot(0);
}

time = range(bar);
EOF
expect <<EOF
line 6: "time" cannot be used as control variable near 'EOF'
EOF

#------------------------------------------------------------------------------

ptest_fail "stimuli, errors: duplicate control element" -c -q << EOF
midi "foo" {
	bar = pot(0);
	bar = pot(1);
}
EOF
expect <<EOF
line 4: cannot add MIDI input "bar" near '}'
EOF

#------------------------------------------------------------------------------

ptest_fail "stimuli, errors: bind control element twice" -c -q << EOF
midi "foo" {
	bar = pot(0);
}

foo = range(bar);
bar = button(bar);
EOF
expect <<EOF
line 7: cannot add stimulus for MIDI input "bar" near 'EOF'
EOF

###############################################################################
