#!/bin/sh
. ./Common

###############################################################################

ptest "constant folding: x = 1+2" << EOF
x = 1+2
EOF
expect <<EOF
x = 3
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = 1-2" << EOF
x = 1-2
EOF
expect <<EOF
x = -1
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = 2*3" << EOF
x = 2*3
EOF
expect <<EOF
x = 6
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = 4/5" << EOF
x = 4/5
EOF
expect <<EOF
x = 0.8
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = 2.8 % 0.5" << EOF
x = 2.8 % 0.5
EOF
expect <<EOF
x = 0.3
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = a+1 (nothign to fold)" << EOF
x = a+1
EOF
expect <<EOF
x = (+ a 1)
EOF

#------------------------------------------------------------------------------

ptest "constant folding: x = 1+b (nothign to fold)" << EOF
x = 1+b
EOF
expect <<EOF
x = (+ 1 b)
EOF

###############################################################################
