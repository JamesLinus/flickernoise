#!/bin/sh
. ./Common

###############################################################################

ptest "not: !a" << EOF
x = !a
EOF
expect <<EOF
x = (! a)
EOF

#------------------------------------------------------------------------------

ptest_fail "not: !a (try to generate code)" -c << EOF
per_frame: wave_a = !a
EOF
expect <<EOF
FPVM, line 2: Operation not supported: ! near 'EOF'
EOF

#------------------------------------------------------------------------------

ptest "not: !0" << EOF
x = !0
EOF
expect <<EOF
x = 1
EOF

#------------------------------------------------------------------------------

ptest "not: !1" << EOF
x = !1
EOF
expect <<EOF
x = 0
EOF

#------------------------------------------------------------------------------

ptest "not: !a*b" << EOF
x = !a*b
EOF
expect <<EOF
x = (* (! a) b)
EOF

#------------------------------------------------------------------------------

ptest "not: -!a" << EOF
x = -!a
EOF
expect <<EOF
x = (- (! a))
EOF

#------------------------------------------------------------------------------

ptest "not: !-b" << EOF
x = !-b
EOF
expect <<EOF
x = (! (- b))
EOF

###############################################################################
