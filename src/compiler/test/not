#!/bin/sh
. ./Common

###############################################################################

ptest "not: !a" << EOF
sx = !a
EOF
expect <<EOF
sx = (! a)
EOF

#------------------------------------------------------------------------------

ptest_fail "not: !a (try to generate code)" -c << EOF
per_frame: wave_a = !a
EOF
expect <<EOF
FPVM, line 2: Operation not supported: 29 near 'EOF'
EOF

#------------------------------------------------------------------------------

ptest "not: !0" << EOF
sx = !0
EOF
expect <<EOF
sx = 1
EOF

#------------------------------------------------------------------------------

ptest "not: !1" << EOF
sx = !1
EOF
expect <<EOF
sx = 0
EOF

#------------------------------------------------------------------------------

ptest "not: !a*b" << EOF
sx = !a*b
EOF
expect <<EOF
sx = (* (! a) b)
EOF

#------------------------------------------------------------------------------

ptest "not: -!a" << EOF
sx = -!a
EOF
expect <<EOF
sx = (- (! a))
EOF

#------------------------------------------------------------------------------

ptest "not: !-b" << EOF
sx = !-b
EOF
expect <<EOF
sx = (! (- b))
EOF

#------------------------------------------------------------------------------

ptest "not: if (!a, b, c)" << EOF
sx = if (!a, b, c)
EOF
expect <<EOF
sx = (if a c b)
EOF

#------------------------------------------------------------------------------

ptest "not: !a ? b : c" << EOF
sx = !a ? b : c
EOF
expect <<EOF
sx = (if a c b)
EOF

#------------------------------------------------------------------------------

ptest "not: !0 ? b : c" << EOF
sx = !0 ? b : c
EOF
expect <<EOF
sx = b
EOF

#------------------------------------------------------------------------------

ptest "not: !1 ? b : c" << EOF
sx = !1 ? b : c
EOF
expect <<EOF
sx = c
EOF

###############################################################################
