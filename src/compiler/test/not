#!/bin/sh
. ./Common

###############################################################################

ptest "not: !a" << EOF
x = !a
EOF
expect <<EOF
x = (! a)
EOF

#------------------------------------------------------------------------------

ptest_fail "not: !a (try to generate code)" -c << EOF
per_frame: wave_a = !a
EOF
expect <<EOF
FPVM, line 2: Operation not supported: 29 near 'EOF'
EOF

#------------------------------------------------------------------------------

ptest "not: !0" << EOF
x = !0
EOF
expect <<EOF
x = 1
EOF

#------------------------------------------------------------------------------

ptest "not: !1" << EOF
x = !1
EOF
expect <<EOF
x = 0
EOF

#------------------------------------------------------------------------------

ptest "not: !a*b" << EOF
x = !a*b
EOF
expect <<EOF
x = (* (! a) b)
EOF

#------------------------------------------------------------------------------

ptest "not: -!a" << EOF
x = -!a
EOF
expect <<EOF
x = (- (! a))
EOF

#------------------------------------------------------------------------------

ptest "not: !-b" << EOF
x = !-b
EOF
expect <<EOF
x = (! (- b))
EOF

#------------------------------------------------------------------------------

ptest "not: if (!a, b, c)" << EOF
x = if (!a, b, c)
EOF
expect <<EOF
x = (if a c b)
EOF

#------------------------------------------------------------------------------

ptest "not: !a ? b : c" << EOF
x = !a ? b : c
EOF
expect <<EOF
x = (if a c b)
EOF

#------------------------------------------------------------------------------

ptest "not: !0 ? b : c" << EOF
x = !0 ? b : c
EOF
expect <<EOF
x = b
EOF

#------------------------------------------------------------------------------

ptest "not: !1 ? b : c" << EOF
x = !1 ? b : c
EOF
expect <<EOF
x = c
EOF

###############################################################################
