#!/bin/sh
. ./Common

###############################################################################

ptest "or: bor(a, b)" << EOF
sx = bor(a, b)
EOF
expect <<EOF
sx = (|| a b)
EOF

#------------------------------------------------------------------------------

ptest "or: a || b" << EOF
sx = a || b
EOF
expect <<EOF
sx = (|| a b)
EOF

#------------------------------------------------------------------------------

ptest "or: 0 || 0" << EOF
sx = 0 || 0
EOF
expect <<EOF
sx = 0
EOF

#------------------------------------------------------------------------------

ptest "or: 1 || 0" << EOF
sx = 1 || 0
EOF
expect <<EOF
sx = 1
EOF

#------------------------------------------------------------------------------

ptest "or: 0 || 1" << EOF
sx = 0 || 1
EOF
expect <<EOF
sx = 1
EOF

#------------------------------------------------------------------------------

ptest "or: 1 || 1" << EOF
sx = 1 || 1
EOF
expect <<EOF
sx = 1
EOF

#------------------------------------------------------------------------------

ptest "or: a || b && c" << EOF
sx = a || b && c
EOF
expect <<EOF
sx = (|| a (&& b c))
EOF

#------------------------------------------------------------------------------

fpvm "or: a || b (generate code)" <<EOF
sx = a || b
EOF
expect <<EOF
COPY a -> R2
IF 1,0 -> R-003
COPY b -> R2
IF 1,R-003 -> sx
EOF

###############################################################################
